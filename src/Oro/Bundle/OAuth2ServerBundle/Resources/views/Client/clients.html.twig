{% import 'OroUIBundle::macros.html.twig' as UI %}
{% import 'OroDataGridBundle::macros.html.twig' as dataGrid %}

<div class="oauth-clients-container">
    {% if not encryptionKeysExist %}
    <div class="alert alert-warning">{{ 'oro.oauth2server.no_encryption_keys'|trans }}</div>
    {% endif %}

    {% if creationGranted %}
    <div class="filter-box btn-container clearfix">
        <div class="pull-right">
            {{ UI.clientButton({
                'dataUrl': path('oro_oauth2_server_client_create', {entityClass: entityClass, entityId: entityId}),
                'aCss': 'no-hash btn-sm',
                'label': 'oro.oauth2server.client.action.add'|trans,
                'widget': {
                    'type': 'dialog',
                    'multiple': false,
                    'reload-grid-name': 'oauth-client-with-owner-grid',
                    'options': {
                        'alias': 'oauth-client-dialog',
                        'dialogOptions': {
                            'title': 'oro.oauth2server.client.dialog.create_title'|trans,
                            'modal': true,
                            'width': 500
                        }
                    }
                }
            }) }}
        </div>
    </div>
    {% endif %}

    {{ dataGrid.renderGrid(
        'oauth-client-with-owner-grid',
        { ownerEntityClass: entityClass, ownerEntityId: entityId, '_grid_view': {'_disabled': true} },
        { cssClass: 'inner-grid' }
    ) }}
</div>
